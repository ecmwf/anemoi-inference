- name: grib-in-grib-out
  input: input.grib
  output: output.grib
  checks:
    - check_grib:
        grib_keys:
          stream: oper
          class: ai
          type: fc
        check_accum: tp
        check_nans: true
  inference_config:
    post_processors:
      - accumulate_from_start_of_forecast
    write_initial_state: false
    checkpoint: ${checkpoint:}
    input:
      grib: ${input:}
    output:
      grib:
          path: ${output:}
          encoding:
            stream: oper
            class: ai
            type: fc

- name: grib-in-netcdf-out
  input: input.grib
  output: output.nc
  checks:
    - check_netcdf:
        check_accum: tp
        check_nans: true
  inference_config:
    post_processors:
      - accumulate_from_start_of_forecast
    write_initial_state: false
    checkpoint: ${checkpoint:}
    input:
      grib: ${input:}
    output:
      netcdf: ${output:}
